{% extends "base.html" %}

{% block styles %}
{{ super() }}
<link rel="stylesheet" href="{{ url_for('static', filename='css/landing.css') }}">
{% endblock %}

{% block content %}
<!-- Hero Section -->
<section class="hero-section">
    <div class="hero-wrapper">
        <canvas id="bgParticles" class="hero-particles"></canvas>
        <div class="hero-content">
            <div class="container">
                <div class="row justify-content-center">
                    <div class="col-lg-10 text-center">
                        <h1 class="hero-title">
                            Toko Komputer Gloria
                        </h1>
                        <p class="hero-subtitle">
                            Solusi lengkap kebutuhan komputer dan teknologi Anda dengan kualitas terjamin dan layanan profesional
                        </p>
                        <div class="hero-actions">
                            <a href="{{ url_for('main.products') }}" class="btn-primary-glow">
                                <span>Belanja Sekarang</span>
                                <i class="bi bi-arrow-right-circle-fill ms-2"></i>
                            </a>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <div class="hero-overlay"></div>
    </div>
</section>

<!-- Product Highlights -->
<section class="product-highlights-section">
    <div class="container py-5">
        <div class="row text-center mb-4">
            <div class="col-12">
                <h2 class="section-title" data-aos="fade-up">Produk Unggulan</h2>
                <p class="section-subtitle" data-aos="fade-up" data-aos-delay="100">Pilihan terbaik untuk kebutuhan komputer & teknologi Anda</p>
            </div>
        </div>
    <div class="row g-4 justify-content-center">
        {% for product in products[:6] %}
        <div class="col-md-4 col-lg-3">
            <div class="product-card">
                <div class="product-image-wrapper">
                    {% if product.photo %}
                    <img src="{{ url_for('static', filename='uploads/' ~ product.photo) }}" class="card-img-top" alt="{{ product.product_name }}">
                    {% else %}
                    <img src="{{ url_for('static', filename='uploads/no-image.png') }}" class="card-img-top" alt="No Image">
                    {% endif %}
                </div>
                <div class="card-body">
                    <h5 class="product-title">{{ product.product_name|title }}</h5>
                    <div class="category-badge">
                        {% if 'Aksesoris' in product.category %}
                        <span class="badge accessories">{{ product.category }}</span>
                        {% elif 'Tinta' in product.category %}
                        <span class="badge ink">{{ product.category }}</span>
                        {% else %}
                        <span class="badge default">{{ product.category or 'Lainnya' }}</span>
                        {% endif %}
                    </div>
                    <p class="price">Rp{{ '{:,.0f}'.format(product.selling_price) }}</p>
                    <a href="{{ url_for('main.products') }}" class="btn-detail">
                        <span>Lihat Detail</span>
                        <i class="bi bi-arrow-right"></i>
                    </a>
                </div>
            </div>
        </div>
        {% else %}
        <div class="col-12 text-center text-muted">Belum ada produk di inventaris.</div>
        {% endfor %}
    </div>
</section>

<!-- Category/Service Section -->
<section class="category-section">
    <div class="container">
        <div class="section-header">
            <h2 class="section-title">Kategori Produk & Layanan</h2>
            <p class="section-subtitle">
                Solusi lengkap untuk kebutuhan teknologi Anda
            </p>
        </div>
        <div class="row g-4 justify-content-center category-row">
            <div class="col-md-3 col-sm-6">
                <div class="category-card">
                    <div class="icon-wrapper laptop">
                        <i class="bi bi-laptop"></i>
                    </div>
                    <h3>Laptop & Notebook</h3>
                    <p>Koleksi laptop premium untuk produktivitas, kreativitas, dan gaming</p>
                </div>
            </div>
            <div class="col-md-3 col-sm-6">
                <div class="category-card">
                    <div class="icon-wrapper pc">
                        <i class="bi bi-cpu"></i>
                    </div>
                    <h3>Komponen PC</h3>
                    <p>Hardware berkualitas tinggi untuk build PC impian Anda</p>
                </div>
            </div>
            <div class="col-md-3 col-sm-6">
                <div class="category-card">
                    <div class="icon-wrapper accessories">
                        <i class="bi bi-keyboard"></i>
                    </div>
                    <h3>Periferal</h3>
                    <p>Aksesoris premium untuk setup workspace profesional</p>
                </div>
            </div>
            <div class="col-md-3 col-sm-6">
                <div class="category-card">
                    <div class="icon-wrapper service">
                        <i class="bi bi-tools"></i>
                    </div>
                    <h3>Layanan IT</h3>
                    <p>Solusi profesional untuk perawatan dan upgrade perangkat Anda</p>
                </div>
            </div>
        </div>
    </div>
</section>

<!-- Call to Action -->
<section class="cta-section">
    <div class="container">
        <div class="cta-wrapper">
            <div class="row align-items-center">
                <div class="col-lg-7">
                    <h2 class="cta-title">Butuh Bantuan Memilih Produk?</h2>
                    <p class="cta-subtitle">Tim ahli kami siap membantu Anda menemukan solusi teknologi yang tepat</p>
                    <ul class="cta-features">
                        <li><i class="bi bi-check-circle-fill"></i> Konsultasi gratis dengan tim profesional</li>
                        <li><i class="bi bi-check-circle-fill"></i> Rekomendasi produk sesuai kebutuhan</li>
                        <li><i class="bi bi-check-circle-fill"></i> Penawaran khusus untuk pelanggan baru</li>
                    </ul>
                </div>
                <div class="col-lg-5 text-center text-lg-end">
                    <div class="cta-buttons">
                        <a href="https://wa.me/+6281234567890" class="btn-whatsapp">
                            <i class="bi bi-whatsapp"></i>
                            <span>Chat WhatsApp</span>
                        </a>
                        <a href="tel:+6281234567890" class="btn-call">
                            <i class="bi bi-telephone-fill"></i>
                            <span>Hubungi Kami</span>
                        </a>
                    </div>
                </div>
            </div>
        </div>
    </div>
</section>
{% endblock %}

{% block scripts %}
{{ super() }}
<script>
// Modern tech particle animation
const canvas = document.getElementById('bgParticles');
if (canvas) {
    const ctx = canvas.getContext('2d');
    let w, h, particles = [];
    const colors = ['#3B82F6', '#60A5FA', '#7C5CFF'];
    
    function resize() {
        w = canvas.width = window.innerWidth;
        h = canvas.height = 500;
    }
    
    window.addEventListener('resize', resize);
    resize();
    
    // Create particles
    for (let i = 0; i < 50; i++) {
        particles.push({
            x: Math.random() * w,
            y: Math.random() * h,
            size: Math.random() * 3 + 1,
            color: colors[Math.floor(Math.random() * colors.length)],
            speed: Math.random() * 0.5 + 0.2,
            angle: Math.random() * Math.PI * 2,
            opacity: Math.random() * 0.5 + 0.3
        });
    }
    
    function draw() {
        ctx.clearRect(0, 0, w, h);
        
        // Update and draw particles
        particles.forEach(p => {
            // Move in a smooth wave pattern
            p.x += Math.cos(p.angle) * p.speed;
            p.y += Math.sin(p.angle) * p.speed;
            p.angle += 0.02;
            
            // Wrap around screen
            if (p.x < 0) p.x = w;
            if (p.x > w) p.x = 0;
            if (p.y < 0) p.y = h;
            if (p.y > h) p.y = 0;
            
            // Draw particle
            ctx.beginPath();
            ctx.arc(p.x, p.y, p.size, 0, Math.PI * 2);
            ctx.fillStyle = p.color;
            ctx.globalAlpha = p.opacity;
            ctx.fill();
            
            // Optional: draw connecting lines between nearby particles
            particles.forEach(p2 => {
                const dx = p.x - p2.x;
                const dy = p.y - p2.y;
                const distance = Math.sqrt(dx * dx + dy * dy);
                
                if (distance < 100) {
                    ctx.beginPath();
                    ctx.strokeStyle = p.color;
                    ctx.globalAlpha = 0.1 * (1 - distance / 100);
                    ctx.lineWidth = 1;
                    ctx.moveTo(p.x, p.y);
                    ctx.lineTo(p2.x, p2.y);
                    ctx.stroke();
                }
            });
        });
        
        requestAnimationFrame(draw);
    }
    
    draw();
}

// Cart logic
function updateCartCount() {
    const cart = JSON.parse(localStorage.getItem('cart') || '[]');
    document.getElementById('cartCount').textContent = cart.length;
}

document.addEventListener('DOMContentLoaded', function() {
    updateCartCount();
    document.querySelectorAll('.add-to-cart-btn').forEach(btn => {
        btn.addEventListener('click', function() {
            const name = this.dataset.product;
            const price = parseInt(this.dataset.price);
            const category = this.dataset.category;
            let cart = JSON.parse(localStorage.getItem('cart') || '[]');
            // Jika produk sudah ada, tambah qty
            const idx = cart.findIndex(item => item.name === name);
            if(idx !== -1) {
                cart[idx].qty += 1;
            } else {
                cart.push({name, price, category, qty: 1});
            }
            localStorage.setItem('cart', JSON.stringify(cart));
            updateCartCount();
        });
    });
});
</script>
{% endblock %}
